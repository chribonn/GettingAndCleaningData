CodeBook for Assignment on Course Module Getting and Cleaning Data
==================================================================

Introduction
------------

Taken from the file __README.txt__ that came with the data that was analysed 
>*"The experiments have been carried out with a group of 30 volunteers within an age bracket of 19-48 years. Each person performed six activities (WALKING, WALKING_UPSTAIRS, WALKING_DOWNSTAIRS, SITTING, STANDING, LAYING) wearing a smartphone (Samsung Galaxy S II) on the waist. Using its embedded accelerometer and gyroscope, we captured 3-axial linear acceleration and 3-axial angular velocity at a constant rate of 50Hz. The experiments have been video-recorded to label the data manually. The obtained dataset has been randomly partitioned into two sets, where 70% of the volunteers was selected for generating the training data and 30% the test data."*

Source Data
-----------

The source data was in a zip file the contents of which where extracted into a folder called __UCI HAR Dataset__ retaining any embedded sub directories. 

The source data was downloaded from __https://d396qusza40orc.cloudfront.net/getdata%2Fprojectfiles%2FUCI%20HAR%20Dataset.zip__ on _10 June 2014 at 12:35_ and extracted to __./UCI HAR Dataset__.

The folder layout was such that in the root of the extracted data were files that contained data or instructions common to both the training and test data set while the subfolders __train__ and __test__ contained data relative to the different readings.

The following is the list of folders and files generated from the output:

File Name | Notes
--------- | -----
__./activity_labels.txt__ | Text file consisting of 6 rows of data, each row consisting of a single digit integer a space and a description 
__./features.txt__ | Text file consisting of 561 rows of data, each row consisting of an integer followed by a space and a description
__./features_info.txt__ | Text file giving information on the meaning of the variables defined in __./features.txt__
__./README.txt__ | General information about the project and the data
--------- | -----
__./train/y_train.txt__ | Text file containing one integer per line representing the activity. The description of the activity could be obtained by cross referencing __./activity_labels.txt__
__./train/X_train.txt__ | Space delimited text file containing 561 readings generated during the experiment. The column headings of each datum corresponds to the entries in __./features.txt__
__./train/subject_train.txt__ | Text file containing one integer per line representing the partecipant who took part in the study
--------- | -----
__./train/Inertial Signals/body_acc_x_train.txt__ | The acceleration signal from the smartphone accelerometer X axis in standard gravity units  
__./train/Inertial Signals/body_acc_y_train.txt__ | The acceleration signal from the smartphone accelerometer Y axis in standard gravity units  
__./train/Inertial Signals/body_acc_z_train.txt__ | The acceleration signal from the smartphone accelerometer Z axis in standard gravity units  
__./train/Inertial Signals/body_gyro_x_train.txt__ | The body acceleration signal along the X axis  obtained by subtracting the gravity from the total acceleration  
__./train/Inertial Signals/body_gyro_y_train.txt__ | The body acceleration signal along the Y axis  obtained by subtracting the gravity from the total acceleration  
__./train/Inertial Signals/body_gyro_z_train.txt__ | The body acceleration signal along the Z axis  obtained by subtracting the gravity from the total acceleration  
__./train/Inertial Signals/total_acc_x_train.txt__ | The angular velocity vector along the X axis measured by the gyroscope  
__./train/Inertial Signals/total_acc_y_train.txt__ | The angular velocity vector along the Y axis measured by the gyroscope  
__./train/Inertial Signals/total_acc_z_train.txt__ | The angular velocity vector along the Z axis measured by the gyroscope  
--------- | -----
__./test/y_test.txt__ | Text file containing one integer per line representing the activity. The description of the activity could be obtained by cross referencing __./activity_labels.txt__
__./test/X_test.txt__ | Space delimited text file containing 561 readings generated during the experiment. The column headings of each datum corresponds to the entries in __./features.txt__
__./test/subject_test.txt__ | Text file containing one integer per line representing the partecipant who took part in the study 
--------- | -----
__./test/Inertial Signals/body_acc_x_test.txt__ | The acceleration signal from the smartphone accelerometer X axis in standard gravity units
__./test/Inertial Signals/body_acc_y_test.txt__ | The acceleration signal from the smartphone accelerometer Y axis in standard gravity units
__./test/Inertial Signals/body_acc_z_test.txt__ | The acceleration signal from the smartphone accelerometer Z axis in standard gravity units  
__./test/Inertial Signals/body_gyro_x_test.txt__ | The body acceleration signal along the X axis  obtained by subtracting the gravity from the total acceleration
__./test/Inertial Signals/body_gyro_y_test.txt__ | The body acceleration signal along the Y axis  obtained by subtracting the gravity from the total acceleration 
__./test/Inertial Signals/body_gyro_z_test.txt__ | The body acceleration signal along the Z axis  obtained by subtracting the gravity from the total acceleration  
__./test/Inertial Signals/total_acc_x_test.txt__ | The angular velocity vector along the X axis measured by the gyroscope  
__./test/Inertial Signals/total_acc_y_test.txt__ | The angular velocity vector along the Y axis measured by the gyroscope 
__./test/Inertial Signals/total_acc_z_test.txt__ | The angular velocity vector along the Z axis measured by the gyroscope  

---

Generating the tidy data
------------------------

1. The first stage was to read in (__./activity_labels.txt__) and split the data on the space separating the integer from the description.  
**_Tidy Data: The description was converted from block letters to Proper case_**  

2. The row headings for the various readings was read and a character vector was generated from the features data (__./features.txt__).  
**_Tidy Data: The dashes in the field names were converted to dots in order to retain naming consistency_**  

3. Given the naming convention used by the authors of the study, it was possible to use the same module to process both the training and test data based upon a parameter passed to the module. For the purposes of this document, the files related to the training data will be used.    
  1. The subjects who participated in the analysis were read from (__./train/subject_train.txt__). There was one row for every record.   
**_Tidy Data: The column name student.no was added to the processed information_**  
  2. The activity list was read from (__./train/y_train.txt__). The data here was an integer. There was one row for every record.  
 **_Tidy Data: The read column was called activity.ref_**.  
 **_Tidy Data: Another second column was added to the read data that cross referenced the integer with the corresponding description (see point 1)_**.  
 **_Tidy Data: The added column was called activity.desc_**.  
  3. The sensor readings where read from (__./train/X_train.txt__).  
 **_Tidy Data: The column data that had been read where incorporated into this data frame (see point 2)_**.  
 **_Tidy Data: Only those fields that had '-mean()' and '-std()' in their name were retained. All other fields were ignored_**.  

 ```
    fdata <- fdata[,grep(".mean\\(\\)|.std\\(\\)", names(fdata))]
 ```  
   
4. The data files generated above (point 1, 2 and 3) were combined together using `cbind()` into one data frame that is complete and properly labelled. The resulting data frame is called **trainData**.  

5. Point 3 was repeated on the test data with the same tidying actions described in point 3. The resulting data frame is called **testData**.  

6. The two data frames generated from the training and test data are combined.

 ```
 data <- rbind(trainData, testData)  

 ```   
 
 **_Tidy Data: The open and close bracket '()' characters are removed from the name using the `names(data) <- sub("\\(\\)","",names(data))` function_**.  

7. **_Tidy Data: Using the package data.table, the data frame is converted into a data table. The mean of the 561 numeric factors columns is computed after the data has been grouped by student.no and activity.ref. The resulting data table is converted back into a data frame and is sorted by student.no, activity.ref_**
```
gData <- dt[, lapply(.SD, mean), by=list(student.no, activity.ref), .SDcols=4:ncol(dt)]

 # Convert the data table to a data frame
gData <- as.data.frame(gData)
    
 # sort the data on student.no and activity.reference
groupData <- gData[with(gData, order(student.no, activity.ref)),]
``` 

-----

The resulting tiday data file
=============================

Data Frame: **groupData**
-------------------------

```
str(groupData)
```

Stores the information shown in data grouped by student and activity. The mean value of numeric columns is taken.

>'data.frame':    180 obs. of  69 variables:  
 $ student.no               : int  1 1 1 1 1 1 2 2 2 2 ...  
 $ activity.ref             : int  1 2 3 4 5 6 1 2 3 4 ...  
 $ tBodyAcc.mean.X          : num  0.277 0.255 0.289 0.261 0.279 ...  
 $ tBodyAcc.mean.Y          : num  -0.01738 -0.02395 -0.00992 -0.00131 -0.01614 ...  
 $ tBodyAcc.mean.Z          : num  -0.1111 -0.0973 -0.1076 -0.1045 -0.1106 ...  
 $ tBodyAcc.std.X           : num  -0.284 -0.355 0.03 -0.977 -0.996 ...  
 $ tBodyAcc.std.Y           : num  0.11446 -0.00232 -0.03194 -0.92262 -0.97319 ...  
 $ tBodyAcc.std.Z           : num  -0.26 -0.0195 -0.2304 -0.9396 -0.9798 ...  
 $ tGravityAcc.mean.X       : num  0.935 0.893 0.932 0.832 0.943 ...  
 $ tGravityAcc.mean.Y       : num  -0.282 -0.362 -0.267 0.204 -0.273 ...  
 $ tGravityAcc.mean.Z       : num  -0.0681 -0.0754 -0.0621 0.332 0.0135 ...  
 $ tGravityAcc.std.X        : num  -0.977 -0.956 -0.951 -0.968 -0.994 ...  
 $ tGravityAcc.std.Y        : num  -0.971 -0.953 -0.937 -0.936 -0.981 ...  
 $ tGravityAcc.std.Z        : num  -0.948 -0.912 -0.896 -0.949 -0.976 ...  
 $ tBodyAccJerk.mean.X      : num  0.074 0.1014 0.0542 0.0775 0.0754 ...  
 $ tBodyAccJerk.mean.Y      : num  0.028272 0.019486 0.02965 -0.000619 0.007976 ...  
 $ tBodyAccJerk.mean.Z      : num  -0.00417 -0.04556 -0.01097 -0.00337 -0.00369 ...  
 $ tBodyAccJerk.std.X       : num  -0.1136 -0.4468 -0.0123 -0.9864 -0.9946 ...  
 $ tBodyAccJerk.std.Y       : num  0.067 -0.378 -0.102 -0.981 -0.986 ...  
 $ tBodyAccJerk.std.Z       : num  -0.503 -0.707 -0.346 -0.988 -0.992 ...  
 $ tBodyGyro.mean.X         : num  -0.0418 0.0505 -0.0351 -0.0454 -0.024 ...  
 $ tBodyGyro.mean.Y         : num  -0.0695 -0.1662 -0.0909 -0.0919 -0.0594 ...  
 $ tBodyGyro.mean.Z         : num  0.0849 0.0584 0.0901 0.0629 0.0748 ...  
 $ tBodyGyro.std.X          : num  -0.474 -0.545 -0.458 -0.977 -0.987 ...  
 $ tBodyGyro.std.Y          : num  -0.05461 0.00411 -0.12635 -0.96647 -0.98773 ...  
 $ tBodyGyro.std.Z          : num  -0.344 -0.507 -0.125 -0.941 -0.981 ...  
 $ tBodyGyroJerk.mean.X     : num  -0.09 -0.1222 -0.074 -0.0937 -0.0996 ...  
 $ tBodyGyroJerk.mean.Y     : num  -0.0398 -0.0421 -0.044 -0.0402 -0.0441 ...  
 $ tBodyGyroJerk.mean.Z     : num  -0.0461 -0.0407 -0.027 -0.0467 -0.049 ...  
 $ tBodyGyroJerk.std.X      : num  -0.207 -0.615 -0.487 -0.992 -0.993 ...  
 $ tBodyGyroJerk.std.Y      : num  -0.304 -0.602 -0.239 -0.99 -0.995 ...  
 $ tBodyGyroJerk.std.Z      : num  -0.404 -0.606 -0.269 -0.988 -0.992 ...  
 $ tBodyAccMag.mean         : num  -0.137 -0.1299 0.0272 -0.9485 -0.9843 ...  
 $ tBodyAccMag.std          : num  -0.2197 -0.325 0.0199 -0.9271 -0.9819 ...  
 $ tGravityAccMag.mean      : num  -0.137 -0.1299 0.0272 -0.9485 -0.9843 ...  
 $ tGravityAccMag.std       : num  -0.2197 -0.325 0.0199 -0.9271 -0.9819 ...  
 $ tBodyAccJerkMag.mean     : num  -0.1414 -0.4665 -0.0894 -0.9874 -0.9924 ...  
 $ tBodyAccJerkMag.std      : num  -0.0745 -0.479 -0.0258 -0.9841 -0.9931 ...  
 $ tBodyGyroMag.mean        : num  -0.161 -0.1267 -0.0757 -0.9309 -0.9765 ...  
 $ tBodyGyroMag.std         : num  -0.187 -0.149 -0.226 -0.935 -0.979 ...  
 $ tBodyGyroJerkMag.mean    : num  -0.299 -0.595 -0.295 -0.992 -0.995 ...  
 $ tBodyGyroJerkMag.std     : num  -0.325 -0.649 -0.307 -0.988 -0.995 ...  
 $ fBodyAcc.mean.X          : num  -0.2028 -0.4043 0.0382 -0.9796 -0.9952 ...  
 $ fBodyAcc.mean.Y          : num  0.08971 -0.19098 0.00155 -0.94408 -0.97707 ...  
 $ fBodyAcc.mean.Z          : num  -0.332 -0.433 -0.226 -0.959 -0.985 ...  
 $ fBodyAcc.std.X           : num  -0.3191 -0.3374 0.0243 -0.9764 -0.996 ...  
 $ fBodyAcc.std.Y           : num  0.056 0.0218 -0.113 -0.9173 -0.9723 ...  
 $ fBodyAcc.std.Z           : num  -0.28 0.086 -0.298 -0.934 -0.978 ...  
 $ fBodyAccJerk.mean.X      : num  -0.1705 -0.4799 -0.0277 -0.9866 -0.9946 ...  
 $ fBodyAccJerk.mean.Y      : num  -0.0352 -0.4134 -0.1287 -0.9816 -0.9854 ...  
 $ fBodyAccJerk.mean.Z      : num  -0.469 -0.685 -0.288 -0.986 -0.991 ...  
 $ fBodyAccJerk.std.X       : num  -0.1336 -0.4619 -0.0863 -0.9875 -0.9951 ...  
 $ fBodyAccJerk.std.Y       : num  0.107 -0.382 -0.135 -0.983 -0.987 ...  
 $ fBodyAccJerk.std.Z       : num  -0.535 -0.726 -0.402 -0.988 -0.992 ...  
 $ fBodyGyro.mean.X         : num  -0.339 -0.493 -0.352 -0.976 -0.986 ...  
 $ fBodyGyro.mean.Y         : num  -0.1031 -0.3195 -0.0557 -0.9758 -0.989 ...  
 $ fBodyGyro.mean.Z         : num  -0.2559 -0.4536 -0.0319 -0.9513 -0.9808 ...  
 $ fBodyGyro.std.X          : num  -0.517 -0.566 -0.495 -0.978 -0.987 ...  
 $ fBodyGyro.std.Y          : num  -0.0335 0.1515 -0.1814 -0.9623 -0.9871 ...  
 $ fBodyGyro.std.Z          : num  -0.437 -0.572 -0.238 -0.944 -0.982 ...  
 $ fBodyAccMag.mean         : num  -0.1286 -0.3524 0.0966 -0.9478 -0.9854 ...  
 $ fBodyAccMag.std          : num  -0.398 -0.416 -0.187 -0.928 -0.982 ...  
 $ fBodyBodyAccJerkMag.mean : num  -0.0571 -0.4427 0.0262 -0.9853 -0.9925 ...  
 $ fBodyBodyAccJerkMag.std  : num  -0.103 -0.533 -0.104 -0.982 -0.993 ...  
 $ fBodyBodyGyroMag.mean    : num  -0.199 -0.326 -0.186 -0.958 -0.985 ...  
 $ fBodyBodyGyroMag.std     : num  -0.321 -0.183 -0.398 -0.932 -0.978 ...  
 $ fBodyBodyGyroJerkMag.mean: num  -0.319 -0.635 -0.282 -0.99 -0.995 ...  
 $ fBodyBodyGyroJerkMag.std : num  -0.382 -0.694 -0.392 -0.987 -0.995 ...  
 $ activity.desc            : chr  "Walking" "Walking_upstairs" "Walking_downstairs" "Sitting" ...   


```
colnames(groupData)
```

>  [1] "student.no"                "activity.ref"              "tBodyAcc.mean.X"          
 [4] "tBodyAcc.mean.Y"           "tBodyAcc.mean.Z"           "tBodyAcc.std.X"           
 [7] "tBodyAcc.std.Y"            "tBodyAcc.std.Z"            "tGravityAcc.mean.X"       
[10] "tGravityAcc.mean.Y"        "tGravityAcc.mean.Z"        "tGravityAcc.std.X"        
[13] "tGravityAcc.std.Y"         "tGravityAcc.std.Z"         "tBodyAccJerk.mean.X"      
[16] "tBodyAccJerk.mean.Y"       "tBodyAccJerk.mean.Z"       "tBodyAccJerk.std.X"       
[19] "tBodyAccJerk.std.Y"        "tBodyAccJerk.std.Z"        "tBodyGyro.mean.X"         
[22] "tBodyGyro.mean.Y"          "tBodyGyro.mean.Z"          "tBodyGyro.std.X"          
[25] "tBodyGyro.std.Y"           "tBodyGyro.std.Z"           "tBodyGyroJerk.mean.X"     
[28] "tBodyGyroJerk.mean.Y"      "tBodyGyroJerk.mean.Z"      "tBodyGyroJerk.std.X"      
[31] "tBodyGyroJerk.std.Y"       "tBodyGyroJerk.std.Z"       "tBodyAccMag.mean"         
[34] "tBodyAccMag.std"           "tGravityAccMag.mean"       "tGravityAccMag.std"       
[37] "tBodyAccJerkMag.mean"      "tBodyAccJerkMag.std"       "tBodyGyroMag.mean"        
[40] "tBodyGyroMag.std"          "tBodyGyroJerkMag.mean"     "tBodyGyroJerkMag.std"     
[43] "fBodyAcc.mean.X"           "fBodyAcc.mean.Y"           "fBodyAcc.mean.Z"          
[46] "fBodyAcc.std.X"            "fBodyAcc.std.Y"            "fBodyAcc.std.Z"           
[49] "fBodyAccJerk.mean.X"       "fBodyAccJerk.mean.Y"       "fBodyAccJerk.mean.Z"      
[52] "fBodyAccJerk.std.X"        "fBodyAccJerk.std.Y"        "fBodyAccJerk.std.Z"       
[55] "fBodyGyro.mean.X"          "fBodyGyro.mean.Y"          "fBodyGyro.mean.Z"         
[58] "fBodyGyro.std.X"           "fBodyGyro.std.Y"           "fBodyGyro.std.Z"            
[61] "fBodyAccMag.mean"          "fBodyAccMag.std"           "fBodyBodyAccJerkMag.mean"   
[64] "fBodyBodyAccJerkMag.std"   "fBodyBodyGyroMag.mean"     "fBodyBodyGyroMag.std"       
[67] "fBodyBodyGyroJerkMag.mean" "fBodyBodyGyroJerkMag.std"  "activity.desc"   

This data file is written to a binary file through the command `save(groupData, file = "./data/tidyData.Rda")` as well as to a text file using `write.table(groupData, "./data/tidyData.txt", row.names = FALSE, sep="\t", quote=FALSE)`.